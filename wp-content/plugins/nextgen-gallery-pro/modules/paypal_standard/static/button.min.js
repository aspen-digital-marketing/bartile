jQuery((function(e){function a(a,t){return e("<input/>").attr({name:a,value:t,type:"hidden"})}e("#ngg_paypal_standard_button").on("click",(function(t){t.preventDefault();var n=e(this);if(!n.prop("disabled")){n.attr("disabled","disabled"),n.text(n.attr("data-processing-msg"));var r=e("#ngg_pro_checkout").serialize();r+="&action=paypal_standard_order",e.post(photocrati_ajax.url,r,(function(t){if("object"!=typeof t&&(t=JSON.parse(t)),void 0!==t.error)n.removeAttr("disabled"),n.text(n.attr("data-submit-msg")),alert(t.error);else{var r=e("<form/>").attr({action:n.data("paypal-url"),method:"POST"}),p=n.data("return-url");-1==p.indexOf("?")?p+="?order="+t.order:p+="&order="+t.order;var d=n.data("cancel-url");-1==d.indexOf("?")?d+="?order="+t.order:d+="&order="+t.order,console.log(t),r.append(a("cmd","_cart")),r.append(a("upload",1)),r.append(a("invoice",t.order)),r.append(a("custom",t.order)),r.append(a("bn","NextGENGallery_BuyNow_WPS_US")),r.append(a("currency_code",n.data("currency-code"))),r.append(a("business",n.data("business-email"))),r.append(a("shopping_url",n.data("continue-shopping-url"))),r.append(a("return",p)),r.append(a("cancel_return",d)),r.append(a("notify_url",n.data("notify-url"))),r.append(a("amount",t.total)),t.shipping_enabled?(r.append(a("address_override","1")),r.append(a("address1",t.shipping_street_address)),r.append(a("address2",t.shipping_address_line)),r.append(a("city",t.shipping_city)),r.append(a("country",t.shipping_country)),r.append(a("state",t.shipping_state)),r.append(a("zip",t.shipping_zip))):r.append(a("no_shipping","1")),"undefined"!=t.discount_amount_cart&&r.append(a("discount_amount_cart",t.discount_amount_cart)),"undefined"!=t.discount_rate_cart&&r.append(a("discount_rate_cart",t.discount_rate_cart));var i=1;Ngg_Pro_Cart.get_instance().each((function(e){e.get("items").each((function(t){r.append(a("amount_"+i,t.get("price"))),r.append(a("quantity_"+i,t.get("quantity"))),r.append(a("item_name_"+i,t.get("title")+" / "+e.get("alttext"))),r.append(a("item_number_"+i,e.get("filename"))),i++}))})),r.append(a("handling_cart",Ngg_Pro_Cart.get_instance().shipping)),r.append(a("tax_cart",Ngg_Pro_Cart.get_instance().tax)),e("body").append(r),r.submit()}}))}}))}));