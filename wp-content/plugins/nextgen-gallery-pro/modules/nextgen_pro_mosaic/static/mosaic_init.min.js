var ngg_mosaic_methods={high_dpi:!1,init:function(){this.high_dpi=this.getDPIRatio()>1,_.each(document.getElementsByClassName("ngg-pro-mosaic-container"),(function(t){var i=t.getAttribute("data-ngg-pro-mosaic-id"),e=ngg_mosaic_methods.get_gallery(i);if(ngg_mosaic_methods.get_setting(i,"lazy_load_enable",!1,"bool")){var n=ngg_mosaic_methods.get_setting(e.ID,"lazy_load_initial",35,"int");e.mosaic_loaded=[],_.each(e.images_list,(function(i,o){o<n&&(e.mosaic_loaded.push(i.image_id),t.appendChild(ngg_mosaic_methods.create_image(e,i)))}))}else _.each(e.images_list,(function(i){t.appendChild(ngg_mosaic_methods.create_image(e,i))}))}))},getDPIRatio:function(){var t=1;return void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(t=window.devicePixelRatio),t},get_gallery:function(t){return void 0===window.galleries?null:_.find(galleries,(function(i){return i.ID==t}))},get_setting:function(t,i,e,n){n=n||"bool";var o=this.get_gallery(t);return o&&void 0!==o.display_settings[i]&&(e=o.display_settings[i]),"bool"==n?(1!=e&&"1"!=e||(e=!0),0!=e&&"0"!=e||(e=!1)):"int"==n&&(e=parseInt(e)),e},create_image:function(t,i,e){var n=document.createElement("div");n.setAttribute("class","ngg-pro-mosaic-item");var o=document.createElement("img"),s=i.image;this.high_dpi&&i.use_hdpi&&(s=i.srcsets.hdpi),o.setAttribute("title",i.title),o.setAttribute("alt",i.title),o.setAttribute("src",s),o.setAttribute("width",i.width),o.setAttribute("height",i.height);var a=document.createElement("a"),l=t.mosaic_effect_code.match(/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/gi);if(l)for(var r=0;r<l.length;r++){var g=l[r].match(/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/i);a.setAttribute(g[1],g[2])}return a.setAttribute("href",i.full_image),a.setAttribute("title",i.description),a.setAttribute("data-image-id",i.image_id),a.setAttribute("data-src",i.image),a.setAttribute("data-thumbnail",i.thumb),a.setAttribute("data-title",i.title),a.setAttribute("data-description",i.description),a.setAttribute("data-ngg-captions-nostylecopy","1"),void 0!==e&&a.setAttribute("onload",e),a.appendChild(o),n.appendChild(a),n}};ngg_mosaic_methods.init(),function(t){"use strict";var i={image_loaded:function(t){this.scroll_pending=_.without(this.scroll_pending,t)},scroll_action_running:null,scroll_timer:null,scroll_step:5,scroll_pending:[],scroll_more_to_find:!0,scroll_action:function(i,e){if(!(1==this.scroll_action_running||this.scroll_timer||!this.scroll_more_to_find||this.scroll_pending.length>=1)){this.scroll_action_running=!0;var n=this;this.scroll_timer=setTimeout((function(){clearTimeout(n.scroll_timer),n.scroll_timer=!1}),500),setTimeout((function(){var o=t(e),s=t(window).height()+t(window).scrollTop(),a=o.height()+o.offset().top,l=o.find(".ngg-pro-mosaic-item.entry-visible").first().height();if(s<=a-o.find(".ngg-pro-mosaic-item.entry-visible").last().height()-2*l)n.scroll_action_running=!1;else{var r=ngg_mosaic_methods.get_gallery(i),g=ngg_mosaic_methods.get_setting(i,"lazy_load_batch",this.scroll_step,"int");r.images_list.length-r.mosaic_loaded.length<g&&(g=r.images_list.length-r.mosaic_loaded.length,n.scroll_more_to_find=!1);for(var c=0;c<g;c++){var d=_.find(r.images_list,(function(t){return-1==_.indexOf(r.mosaic_loaded,t.image_id)}));r.mosaic_loaded.push(d.image_id),o.append(ngg_mosaic_methods.create_image(r,d,n.image_loaded(d.image_id)))}o.justifiedGallery("norewind"),n.scroll_action_running=!1,setTimeout((function(){n.scroll_action(i,e)}),800)}}),60)}}};_.each(t(".ngg-pro-mosaic-container"),(function(e){var n=t(e),o=n.data("ngg-pro-mosaic-id"),s={captions:!1,cssAnimation:!0,waitThumbnailsLoad:!1,justifyThreshold:.9,rowHeight:ngg_mosaic_methods.get_setting(o,"row_height",200,"int"),margins:ngg_mosaic_methods.get_setting(o,"margins",15,"int"),lastRow:ngg_mosaic_methods.get_setting(o,"last_row","justify","string")},a=ngg_mosaic_methods.get_gallery(o);n.css({"min-height":ngg_mosaic_methods.get_setting(o,"row_height",200,"int")+"px"}),ngg_mosaic_methods.get_setting(o,"lazy_load_enable",!1,"bool")&&t(window).on("scroll",(function(){i.scroll_action(a.ID,e)})),n.on("jg.complete",(function(){t(window).trigger("ngg.mosaic.complete",[n]),t(window).trigger("resize",[n]),n.waitForImages((function(){t(window).trigger("refreshed")}))})),n.justifiedGallery(s),t(window).on("npl_initialization_complete",(function(){t("#npl_content").on("npl_opening",(function(){n.justifiedGallery("disableRefresh")})),t("#npl_content").on("npl_closing",(function(){n.justifiedGallery("enableRefresh")}))}))}))}(jQuery);