!function(e){var n=setInterval((function(){void 0!==window.Galleria&&(clearInterval(n),t())}),10),t=function(){Galleria.addTheme({name:"nextgen_pro_lightbox",author:"Imagely",version:2,defaults:{debug:!1,responsive:!0,carousel:!0,thumbnails:"lazy",fullscreen:!1,trueFullscreen:!1,fullscreenDoubleTap:!1,maxScaleRatio:1},init:function(n){var t=this;Galleria.requires(1.41,"This version of the NextGEN Pro Lightbox theme requires Galleria 1.4.1 or later"),e.nplModal("log","theme initialization",{options:n});var a={sidebar:{_is_open:!1,_type:"",is_open:function(e){if(void 0===e)return this._is_open;this._is_open=e},toggle:function(n){e.nplModal("log","theme sidebar.toggle()",{type:n}),this.is_open()&&n===this.get_type()?this.close():this.open(n)},open:function(n){e.nplModal("log","theme sidebar.open()",{type:n}),e("#npl_wrapper").addClass("npl-sidebar-open npl-sidebar-overlay-open"),this.render(n),a.sidebar.is_open(!0);var i=e.nplModal("get_state");i.sidebar=n,e.nplModal("router.navigate",e.nplModal("get_setting","router_slug")+"/"+i.slug+"/"+i.image_id+"/"+n,!0),t.resize(),t.trigger("npl_sidebar_opened")},close:function(){e.nplModal("log","theme sidebar.close()"),e("#npl_wrapper").removeClass("npl-sidebar-open npl-sidebar-overlay-open"),a.sidebar.is_open(!1);var n=e.nplModal("get_state");n.sidebar=null,e.nplModal("router.navigate",e.nplModal("get_setting","router_slug")+"/"+n.slug+"/"+n.image_id,!0),t.resize(),t.trigger("npl_sidebar_closed")},render:function(n){e.nplModal("log","theme sidebar.render()",{type:n}),n!==this.get_type()&&(this._type=n,e.nplModal("get_state").sidebar=n),a.sidebars[n].render(a.galleria.get_current_image_id()),a.sidebars[n].init()},get_type:function(){return this._type},events:{bind:function(){e.nplModal("log","theme sidebar.events.bind()"),e("#npl_content").on("npl_sidebar_rendered",this.rendered),e("#npl_sidebar_toggle").on("click",(function(){a.sidebar.close()}))},rendered:function(){e.nplModal("log","theme sidebar.events.rendered()"),e("#nggpl-sidebar-thumbnail-img").attr("src",t.getData(t.getIndex()).image)}}},sidebars:{datacache:{_cache:[],_current_image_ndx:null,_last_image_ndx:null,events:{bind:function(){e.nplModal("log","theme sidebars.datacache.events.bind()"),t.bind("loadstart",this.loadstart)},loadstart:function(){e.nplModal("log","theme sidebars.datacache.events.image()"),null===a.sidebars.datacache._current_image_ndx?a.sidebars.datacache._last_image_ndx=a.sidebars.datacache._current_image_ndx=t.getIndex():(a.sidebars.datacache._last_image_ndx=a.sidebars.datacache._current_image_ndx,a.sidebars.datacache._current_image_ndx=t.getIndex())}},get_carousel_navigation_direction:function(){return this._current_image_ndx===this._last_image_ndx?"same":0===this._last_image_ndx&&this._current_image_ndx===t.getDataLength()-1?"left":0===this._current_image_ndx&&this._last_image_ndx===t.getDataLength()-1?"right":this._current_image_ndx<this._last_image_ndx?"left":"right"},get_cache_size:function(){var n=this._cache.length;return e.nplModal("log","theme sidebars.comments.get_cache_size()",{result:n}),n},get_prev_uncached_image_id:function(n,i){i=i||0;var l=t.getData(t.getPrev(a.galleria.get_index_from_id(n)-i)).image_id;return this._cache[l]&&this.get_cache_size()<t.getDataLength()&&(l=this.get_prev_uncached_image_id(l)),e.nplModal("log","theme sidebars.comments.get_prev_uncached_image_id()",{id:n,result:l}),l},get_next_uncached_image_id:function(n,i){i=i||0;var l=t.getData(t.getNext(a.galleria.get_index_from_id(n)+i)).image_id;return this._cache[l]&&this.get_cache_size()<t.getDataLength()&&(l=this.get_next_uncached_image_id(l)),e.nplModal("log","theme sidebars.comments.get_next_uncached_image_id()",{id:n,result:l}),l},expanded_request:function(n,t){e.nplModal("log","theme sidebars.comments.expanded_request()",{id:n});var a=n instanceof Array?n:n.toString().split(",");if(1===a.length){var i=a[0],l=this.get_prev_uncached_image_id(i),o=this.get_next_uncached_image_id(i);this._cache[l]||(this._cache[l]="Placeholder stub",a.unshift(l)),this._cache[o]||l===o||n===o||(this._cache[o]="Placeholder stub",a.push(o))}a=this.sort_uniq(a),this.request(a,0,t)},request:function(n,t,a){e.nplModal("log","theme sidebars.comments.request()",{id:n,page:t});var i=this,l={action:"pro_lightbox_get_sidebar_data",type:"image",page:t,id:n.join(","),from:window.parent.location.toString()};e.nplModal("get_setting","lang",!1)&&(l.lang=e.nplModal("get_setting","lang")),e.post(photocrati_ajax.url,l,(function(n){for(var t in e.nplModal("log","theme sidebars.comments.request() response",{response:n}),"object"!=typeof n&&(n=JSON.parse(n)),n)i._cache[t]=n[t];"function"==typeof a&&a(n)}))},load_more:function(n){if(e.nplModal("log","theme sidebars.comments.load_more()",{id:n}),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)){for(var t=[],i=a.sidebars.datacache.get_carousel_navigation_direction(),l=0;l<=3;l++){if("left"===i)var o=this.get_prev_uncached_image_id(n,l);else o=this.get_next_uncached_image_id(n,l);this._cache[o]||(this._cache[o]="Placeholder stub",t.push(o))}0!==(t=this.sort_uniq(t)).length&&this.expanded_request(t)}},sort_uniq:function(e){return e.sort().filter((function(e,n,t){return!n||e!==t[n-1]}))},get_cache_by_id:function(e){return this._cache[e]}},comments:{init:function(){if(e.nplModal("log","theme sidebars.comments.init()"),1===e("#nggpl-comments-wrapper").length){var n=document.getElementById("ngg_comment_origin_url");null!=n&&(n.value=window.location.href.toString()),e("#npl_sidebar").find("a").each((function(){"nggpl-comment-logout"===e(this).attr("id")?e(this).attr("href",e(this).attr("href")+"?redirect_to="+window.location.toString()):e(this).attr("target","_blank")})),e("#nggpl-respond-form").on("submit",(function(n){n.preventDefault();var t=e("#nggpl-comment-status");e("#npl_wrapper").addClass("npl-sidebar-overlay-open"),e.ajax({type:e(this).attr("method"),url:e(this).attr("action"),data:e(this).serialize(),dataType:"json",success:function(n){if(!0===n.success){e("#nggpl-comment").val(""),e("#nggpl-comments-title").val("");var i=a.galleria.get_current_image_id();a.sidebars.datacache.expanded_request(i,(function(){a.sidebar.render(a.sidebars.comments.get_type(),i)}))}else t.addClass("error").html(n),e("#npl_wrapper").removeClass("npl-sidebar-overlay-open")},complete:function(e,n){},error:function(n){t.addClass("error").html(n.responseText),e("#npl_wrapper").removeClass("npl-sidebar-overlay-open")}})})),e("#npl_sidebar .nggpl-button, #nggpl-comment-form-wrapper input[type='submit']").each((function(){e(this).css({color:e.nplModal("get_setting","sidebar_button_color"),"background-color":e.nplModal("get_setting","sidebar_button_background")})})),e(".nggpl-reply-to-comment").on("click",(function(n){n.preventDefault(),e("#nggpl-comment_parent").val(e(this).data("comment-id")),e("#nggpl-comment-reply-status").removeClass("hidden"),e("#nggpl-commentform").find(":input").filter(":visible").first().trigger("focus"),e("#npl_sidebar").scrollTop(e("#nggpl-comments-bottom").offset().top)})),e("#nggpl-comment-reply-status a").on("click",(function(n){n.preventDefault(),e("#nggpl-comment_parent").val("0"),e("#nggpl-comment-reply-status").addClass("hidden")})),e("#nggpl-comment-nav-below a").on("click",(function(n){n.preventDefault(),e("#npl_wrapper").addClass("npl-sidebar-overlay-open");var t=e(this).data("page-id");a.sidebars.datacache.request([a.galleria.get_current_image_id()],t,(function(){a.sidebar.render("comments",a.galleria.get_current_image_id())}))})),t.trigger("npl_sidebar_rendered"),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_sharing",!1)&&(e("#nggpl-comments-image-share-icons").removeClass("disabled"),a.share_icons.create("#nggpl-comments-image-share-icons",a.icons.get_overlay_color())),a.sidebars.comments.wait_for_image_to_reveal()}},wait_for_image_to_reveal:function(){a.sidebars.comments.events.between_loadstart_and_finish?a.sidebars.comments.events.waiting_for_image_to_load=!0:e("#npl_wrapper").removeClass("npl-sidebar-overlay-open")},render:function(n){e.nplModal("log","theme sidebars.comments.render()",{id:n});var t=a.sidebars.datacache.get_cache_by_id(n);if(t)if("Placeholder stub"===t){e("#npl_wrapper").addClass("npl-sidebar-overlay-open");var i=setInterval((function(){"Placeholder stub"!==(t=a.sidebars.datacache.get_cache_by_id(n))&&(e("#npl_sidebar").html(t.comments.rendered_view),a.sidebars.comments.init(),clearInterval(i))}),250)}else e("#npl_sidebar").html(t.comments.rendered_view),e("#npl_wrapper").removeClass("npl-sidebar-overlay-open");else e("#npl_wrapper").addClass("npl-sidebar-overlay-open"),a.sidebars.datacache.expanded_request(n,(function(){t=a.sidebars.datacache.get_cache_by_id(n),e("#npl_sidebar").html(t.comments.rendered_view),a.sidebars.comments.init()}))},get_type:function(){return"comments"},events:{waiting_for_image_to_load:!1,between_loadstart_and_finish:!1,bind:function(){e.nplModal("log","theme sidebars.comments.events.bind()"),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&!a.nplModal.is_random_source()&&(t.bind("loadstart",this.loadstart),t.bind("npl_init",this.npl_init),t.bind("npl_init_keys",this.npl_init_keys),t.bind("image",this.image))},npl_init:function(){e.nplModal("log","theme sidebars.comments.events.npl_init()");var n=e("<i/>").addClass("nggpl-toolbar-button-comment fa fa-comment").attr({title:e.nplModal("get_setting","i18n").toggle_social_sidebar});a.thumbnails.register_button(n,(function(e){a.sidebar.toggle(a.sidebars.comments.get_type()),e.preventDefault()}))},image:function(){a.sidebars.comments.events.between_loadstart_and_finish=!1,a.sidebars.comments.events.waiting_for_image_to_load&&(a.sidebars.comments.events.waiting_for_image_to_load=!1,e("#npl_wrapper").removeClass("npl-sidebar-overlay-open"))},_loadstart_run_once:!1,loadstart:function(n){e.nplModal("log","theme sidebars.comments.events.npl_init_complete()"),a.sidebars.comments.events.between_loadstart_and_finish=!0,a.nplModal.is_nextgen_gallery()&&!a.sidebars.comments._loadstart_run_once?((e.nplModal("get_state").sidebar&&e.nplModal("get_state").sidebar===a.sidebars.comments.get_type()||e.nplModal("get_setting","display_comments"))&&a.sidebar.open(a.sidebars.comments.get_type()),a.sidebars.comments._loadstart_run_once=!0):a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&(a.sidebars.datacache.load_more(a.galleria.get_current_image_id()),a.sidebar.is_open()&&a.sidebar.get_type()===a.sidebars.comments.get_type()&&a.sidebar.render(a.sidebars.comments.get_type()))},npl_init_keys:function(){e.nplModal("log","theme sidebars.comments.events.npl_init_keys()");var n=a.galleria.get_keybinding_exclude_list();a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&t.attachKeyboard({32:function(){e(document.activeElement).is(n)||a.sidebar.toggle(a.sidebars.comments.get_type())}})}}}},thumbnails:{is_open:function(){return!e("#npl_wrapper").hasClass("npl-carousel-closed")},toggle:function(){e.nplModal("log","theme thumbnails.toggle()"),this.is_open()?this.close():this.open()},open:function(){e.nplModal("log","theme thumbnails.open()"),e("#npl_wrapper").removeClass("npl-carousel-closed"),e(".galleria-dock-toggle-container i").toggleClass("fa-angle-up fa-angle-down"),e(".galleria-dock-toggle-container").find("[data-fa-i2svg]").toggleClass("fa-angle-up fa-angle-down"),e(window).trigger("resize")},close:function(){e.nplModal("log","theme thumbnails.close()"),e("#npl_wrapper").addClass("npl-carousel-closed"),e(".galleria-dock-toggle-container i").toggleClass("fa-angle-up fa-angle-down"),e(".galleria-dock-toggle-container").find("[data-fa-i2svg]").toggleClass("fa-angle-up fa-angle-down"),e(window).trigger("resize")},adjust_container:function(){e.nplModal("log","theme thumbnails.adjust_container()"),setTimeout((function(){t.$("thumbnails-container").width()-t.$("nextgen-buttons").width()-t.$("thumb-nav-left").width()-t.$("thumb-nav-right").width()<=280?t.$("container").addClass("nggpl-carousel-too-small"):t.$("container").removeClass("nggpl-carousel-too-small")}),250)},_buttons:[],register_button:function(n,a){e.nplModal("log","theme thumbnails.register_button()",{button:n});var i=e('<span class="nggpl-button nggpl-toolbar-button"/>');e.nplModal("get_setting","icon_background_enabled",!1)&&e.nplModal("get_setting","icon_background_rounded",!1)&&i.addClass("nggpl-rounded"),i.html(n),this._buttons.push(i),e(t._dom.stage).append(i),i.on("click",(function(e){a(e)}))},get_registered_buttons:function(){return e.nplModal("log","theme thumbnails.get_registered_buttons",{buttons:this._buttons}),this._buttons},events:{bind:function(){e.nplModal("log","theme thumbnails.events.bind()"),t.bind("loadfinish",a.thumbnails.adjust_container),t.bind("loadfinish",this.loadfinish),t.bind("npl_sidebar_opened",a.thumbnails.adjust_container),t.bind("npl_sidebar_closed",a.thumbnails.adjust_container),t.bind("npl_init",this.npl_init),t.bind("npl_init_complete",this.npl_init_complete),a.galleria.bind_once("resize",a.thumbnails.adjust_container,250)},npl_init:function(){e.nplModal("log","theme thumbnails.events.npl_init()"),"numbers"===n.thumbnails?(t.$("container").addClass("nggpl-carousel-numbers"),t.$("thumbnails-list").css("color",a.icons.get_color()),t.updateCarousel()):"lazy"===n.thumbnails&&t.lazyLoadChunks(10),t.$("thumbnails-container").css({background:e.nplModal("get_setting","carousel_background_color")});var i=e("<i/>").addClass("fa fa-angle-right").css({color:a.icons.get_color()}),l=e("<i/>").addClass("fa fa-angle-left").css({color:a.icons.get_color()});e(t._dom.stage).append(i),e(t._dom.stage).append(l),t.append({"thumb-nav-left":l}),t.append({"thumb-nav-right":i}),t.addElement("dock-toggle-container");var o=t.$("dock-toggle-container").css({background:e.nplModal("get_setting","carousel_background_color")}),s=e("<i/>").addClass("fa fa-angle-down").css({color:e.nplModal("get_setting","carousel_text_color")});a.thumbnails.is_open()||s.toggleClass("fa-angle-up fa-angle-down"),e(t._dom.stage).append(s),t.append({"dock-toggle-container":s}),o.on("click",t.proxy((function(){a.thumbnails.toggle()})));var r=e("<i/>").addClass("nggpl-toolbar-button-play fa fa-play").attr({title:e.nplModal("get_setting","i18n").play_pause});this._playing&&r.removeClass("fa-play").addClass("fa-pause"),a.thumbnails.register_button(r,(function(n){n.preventDefault(),t.playToggle();var a=e(n.currentTarget);a.find("i").toggleClass("fa-play fa-pause"),a.find("[data-fa-i2svg]").toggleClass("fa-play fa-pause")}));var d=e("<i/>").addClass("nggpl-toolbar-button-info fa fa-info").attr({title:e.nplModal("get_setting","i18n").toggle_image_info});a.thumbnails.register_button(d,(function(e){e.preventDefault(),a.info.toggle()}))},npl_init_complete:function(){e.nplModal("log","theme thumbnails.events.npl_init_complete()");var n=a.thumbnails.get_registered_buttons();for(i=0;i<=n.length-1;i++)n[i].css({color:a.icons.get_color(),"background-color":a.icons.get_background()});t.addElement("nextgen-buttons"),t.append({"nextgen-buttons":n}),t.prependChild("thumbnails-container","nextgen-buttons"),t.prependChild("info","dock-toggle-container"),e.nplModal("mobile.browser.any")||t.addIdleState(t.get("dock-toggle-button"),{opacity:0})},_loadfinish_ran_once:!1,loadfinish:function(){e.nplModal("log","theme thumbnails.events.loadfinish()"),a.thumbnails.events._loadfinish_ran_once||(e("#npl_spinner_container").addClass("hidden"),a.thumbnails.events._loadfinish_ran_once=!0)}}},info:{is_open:function(){return e("#npl_wrapper").hasClass("npl-info-open")},toggle:function(){e.nplModal("log","theme info.toggle()"),this.is_open()?this.close():this.open()},open:function(){e.nplModal("log","theme info.open()"),e("#npl_wrapper").addClass("npl-info-open")},close:function(){e.nplModal("log","theme info.close()"),e("#npl_wrapper").removeClass("npl-info-open")},events:{bind:function(){e.nplModal("log","theme info.events.bind()"),t.bind("npl_init",this.npl_init),t.bind("loadfinish",this.loadfinish)},npl_init:function(){e.nplModal("log","theme info.events.npl_init()");var n=t.$("info").detach();t.$("thumbnails-container").append(n),t.prependChild("info-text",e("<div/>").attr("id","galleria-image-share-icons").attr("class","galleria-image-share-icons")),(carousel_text_color=e.nplModal("get_setting","carousel_text_color"))&&(t.$("info-title").css({color:carousel_text_color}),t.$("info-description").css({color:carousel_text_color})),t.$("info, info-text, info-title, info-description").css({background:e.nplModal("get_setting","carousel_background_color")})},_loadfinish_ran_once:!1,loadfinish:function(){e.nplModal("log","theme info.events.loadfinish()"),t.$("info-title, info-description").find("a").each((function(){e(this).attr("target","_blank"),e(this).css("color",a.icons.get_color())})),a.info.events._loadfinish_ran_once=!0}}},icons:{get_color:function(){return e.nplModal("get_setting","icon_color")},get_background:function(){var n=e.nplModal("get_setting","carousel_background_color");return e.nplModal("get_setting","icon_background_enabled",!1)&&(n=e.nplModal("get_setting","icon_background")),n},get_overlay_color:function(){return e.nplModal("get_setting","overlay_icon_color")}},nplModal:{close:function(){e.nplModal("close_modal")},is_random_source:function(){var n=e.nplModal("get_gallery_from_id",e.nplModal("get_state").gallery_id),t=-1!==e.inArray(n.source,["random","random_images"]);return e.nplModal("log","theme nplModal.is_random_source()",{result:t}),t},is_nextgen_gallery:function(){var n="!"!==e.nplModal("get_state").gallery_id;return e.nplModal("log","theme nplModal.is_nextgen_gallery()",{result:n}),n},is_nextgen_widget:function(){var n=!1,t=e.nplModal("get_gallery_from_id",e.nplModal("get_state").gallery_id).slug;return t&&(n=-1!==t.indexOf("widget-ngg-images")),e.nplModal("log","theme nplModal.is_nextgen_widget()",{result:n}),n},events:{bind:function(){e.nplModal("log","theme nplModal.bind()"),(Galleria.IPAD||Galleria.IPHONE)&&t.$("container").addClass("nggpl-ios-browser"),a.nplModal.is_nextgen_gallery()&&t.bind("image",this.image),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&e("#npl_content").on("npl_url_handler",this.unhandled_url_change),e.nplModal("get_setting","protect_images",!1)&&(e(".galleria-image").on("dragstart",(function(e){e.preventDefault()})),t.bind("npl_init",this.npl_init),t.bind("npl_init_complete",this.npl_init_complete)),jQuery("#npl_content").on("npl_closing",this.closing)},npl_init:function(){e.nplModal("log","theme nplModal.events.npl_init()"),t.addElement("image-protection"),document.oncontextmenu=function(e){(e=e||window.event).preventDefault()}},npl_init_complete:function(){e.nplModal("log","theme nplModal.events.npl_init_complete()"),t.prependChild("images","image-protection")},_image_ran_once:!1,image:function(){if(e.nplModal("log","theme nplModal.events.image()"),a.nplModal.events._image_ran_once&&!a.nplModal.is_random_source()){var n=t.getData(t.getIndex()).image_id,i=a.sidebar.is_open()?"/"+a.sidebar.get_type():"",l=e.nplModal("get_state");l.image_id=n,e.nplModal("set_state",l),e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("router.navigate",e.nplModal("get_setting","router_slug")+"/"+e.nplModal("get_state").slug+"/"+n+i,!0)}a.nplModal.events._image_ran_once=!0},unhandled_url_change:function(n,i){e.nplModal("log","theme nplModal.unhandled_url_change()",{event:n,state:i});for(var l=0;l<=t.getDataLength()-1;l++)i.image_id===t.getData(l).image_id&&t.show(l);a.sidebar.is_open()&&null==i.sidebar?a.sidebar.close():a.sidebar.is_open()||void 0===i.sidebar||null===i.sidebar||a.sidebar.open(i.sidebar)},closing:function(){t.detachKeyboard()}}},galleria:{bind_once:function(e,n,t){var a=void 0;window.addEventListener(e,(function(){void 0===a&&(clearTimeout(a),a=void 0),a=setTimeout((function(){a=void 0,n()}),t)}))},get_displayed_gallery_setting:function(n,t){var a="",i=e.nplModal("get_gallery_from_id",e.nplModal("get_state").gallery_id);return"1"===(a=i&&void 0!==i.display_settings[n]?i.display_settings[n]:t)&&(a=!0),"0"===a&&(a=!1),1===a&&(a=!0),0===a&&(a=!1),e.nplModal("log","theme galleria.get_displayed_gallery_setting()",{name:n,result:a}),a},get_keybinding_exclude_list:function(){return"textarea, input"},get_current_image_id:function(){return t.getData(t.getIndex()).image_id},get_index_from_id:function(e){for(var n=null,a=0;a<=t.getDataLength()-1;a++)e===t.getData(a).image_id&&(n=a);return n},events:{bind:function(){e.nplModal("log","theme galleria.events.bind()"),t.bind("touchmove",this.touchmove),t.bind("npl_init",this.npl_init),t.bind("npl_init_keys",this.npl_init_keys),t.bind("npl_init_complete",this.npl_init_complete),t.bind("loadstart",this.loadstart),t.bind("loadfinish",this.loadfinish),e(window).on("resize orientationchange",this.browserchanged)},browserchanged:function(){e.nplModal("log","theme galleria.events.browserchanged()"),setTimeout((function(){t.rescale()}),200)},npl_init:function(){e.nplModal("log","theme galleria.events.npl_init()"),t.setPlaytime(1e3*e.nplModal("get_setting","slideshow_speed",5));var n=e("<i/>").addClass("fa fa-angle-right").css({color:a.icons.get_overlay_color()}),i=e("<i/>").addClass("fa fa-angle-left").css({color:a.icons.get_overlay_color()});e(t._dom.stage).append(n),e(t._dom.stage).append(i),t.append({"image-nav-left":i}),t.append({"image-nav-right":n}),t.$("counter").css({color:a.icons.get_overlay_color()})},npl_init_keys:function(){e.nplModal("log","theme galleria.events.npl_init_keys()");var n=a.galleria.get_keybinding_exclude_list();t.attachKeyboard({left:function(){e(document.activeElement).is(n)||this.prev()},right:function(){e(document.activeElement).is(n)||this.next()},down:function(){e(document.activeElement).is(n)||a.thumbnails.toggle()},up:function(){e(document.activeElement).is(n)||a.info.toggle()},27:function(e){e.preventDefault(),a.nplModal.close()}})},npl_init_complete:function(){e.nplModal("log","theme galleria.events.npl_init_complete()"),e.nplModal("mobile.browser.any")||(t.addIdleState(t.get("counter"),{opacity:0}),t.addIdleState(t.get("image-nav-left"),{opacity:0}),t.addIdleState(t.get("image-nav-right"),{opacity:0}))},touchmove:function(n){e(".scrollable").has(e(n.target)).length||(e.nplModal("log","theme galleria.events.touchmove() prevented scrolling"),n.preventDefault())},loadstart:function(n){(e.nplModal("log","theme galleria.events.loadstart()",{event:n}),n.cached)||e("#npl_button_close").find("i").removeClass("fa-times-circle")},loadfinish:function(){e.nplModal("log","theme galleria.events.loadfinish()"),e("#npl_button_close").find("i").addClass("fa-times")}}},share_icons:{strip_html:function(e){var n=document.createElement("div");return n.innerHTML=e,n.textContent||n.innerText||""},create:function(n,i){if(e.nplModal("log","theme share_icons.create()"),a.nplModal.is_random_source()||a.nplModal.is_nextgen_widget()||!a.nplModal.is_nextgen_gallery()||!e.nplModal("get_setting","enable_routing",!1))return!1;var l=t.getData(t.getIndex()).image_id,o=t.getData(t.getIndex()),s=encodeURIComponent(window.location.toString()),r=e("<li/>").html(e("<a/>",{href:"https://twitter.com/share?url="+a.share_icons.get_share_url(l,"full"),target:"_blank",class:"nggpl-comment-tweet-button",title:e.nplModal("get_setting","i18n").share.twitter}).css({color:i}).html(e("<i/>",{class:"fa fa-twitter-square"}))),d=e("<li/>").html(e("<a/>",{class:"nggpl-comment-facebook-button",title:e.nplModal("get_setting","i18n").share.facebook}).css({color:i}).html(e("<i/>",{class:"fa fa-facebook-square"})));if(void 0!==e.nplModal("get_setting","facebook_app_id"))d.on("click",(function(e){e.preventDefault(),FB.ui({method:"share",href:a.share_icons.get_share_url(l,"full"),link:window.location.toString()},(function(e){}))}));else{var g="https://www.facebook.com/share.php";g+="?u="+encodeURIComponent(a.share_icons.get_share_url(l,"full"));var _=d.find("a");_.attr("href",g),_.attr("target","_blank")}var c=encodeURIComponent(a.share_icons.get_share_url(l,"full")),p=a.share_icons.strip_html(o.description);p.length>=446&&(p=p.substring(0,492),p+="..."),c+="&url="+s,c+="&media="+o.image,c+="&description="+p;var u=[r,d,e("<li/>").html(e("<a/>",{href:"http://pinterest.com/pin/create/button/?s=100"+c,target:"_blank",class:"nggpl-comment-pinterest-button",title:e.nplModal("get_setting","i18n").share.pinterest}).css({color:i}).html(e("<i/>",{class:"fa fa-pinterest-square"})))];(n=e(n)).html(""),e("<ul/>").appendTo(n),n.find("ul").append(u)},get_share_url:function(n,t){void 0===t&&(t="thumb");var a=e.nplModal("get_state").gallery_id,i=e.nplModal("get_setting","share_url").replace("{gallery_id}",a).replace("{image_id}",n).replace("{named_size}",t),l=e("<a/>").attr("href",e.nplModal("get_setting","wp_site_url"))[0],o=e("<a/>").attr("href",window.location.toString())[0],s=e("<a/>").attr("href",i)[0];return o.pathname.indexOf(l.pathname)>=0&&(o.pathname=o.pathname.substr(l.pathname.length)),o.pathname.indexOf(s.pathname)>=0&&(o.pathname=o.pathname.substr(o.pathname.length)),s.search=o.search,s.search.length>0&&(s.search+="&"),s.search+="uri="+o.pathname,e.nplModal("log","theme share_icons.get_share_url() result",{id:n,named_size:t,result:s.href}),s.href},events:{bind:function(){e.nplModal("log","theme share_icons.events.bind()"),t.bind("loadfinish",this.loadfinish),t.bind("npl_init",this.npl_init)},npl_init:function(){var n,t,a,i,l;void 0!==e.nplModal("get_setting","facebook_app_id")&&void 0===window.fbAsyncInit&&(window.fbAsyncInit=function(){FB.init({appId:e.nplModal("get_setting","facebook_app_id"),autoLogAppEvents:!0,xfbml:!0,version:"v2.12"})},n=document,t="script",a="facebook-jssdk",l=n.getElementsByTagName(t)[0],n.getElementById(a)||((i=n.createElement(t)).id=a,i.src="https://connect.facebook.net/en_US/sdk.js",l.parentNode.insertBefore(i,l)))},loadfinish:function(){if(e.nplModal("log","theme share_icons.events.loadfinish()"),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_sharing",!1)){var n=e.nplModal("get_setting","carousel_text_color")?e.nplModal("get_setting","carousel_text_color"):a.icons.get_color();a.share_icons.create("#galleria-image-share-icons",n)}}}}};e.nplModal("log","theme initialization - about to bind events"),a.galleria.events.bind(),a.nplModal.events.bind(),a.thumbnails.events.bind(),a.info.events.bind(),a.share_icons.events.bind(),a.sidebar.events.bind(),a.sidebars.datacache.events.bind(),a.sidebars.comments.events.bind(),e.nplModal("log","theme initialization - done binding events"),e.nplModal("log","theme initialization - about to trigger npl_ready"),e(t._target).trigger("npl_ready",{galleria_theme:t,methods:a}),e.nplModal("log","theme initialization - about to trigger npl_init"),t.trigger("npl_init"),e.nplModal("log","theme initialization - about to trigger npl_init_keys"),t.trigger("npl_init_keys"),e.nplModal("log","theme initialization - about to trigger npl_init_complete"),t.trigger("npl_init_complete")}})}}(jQuery);