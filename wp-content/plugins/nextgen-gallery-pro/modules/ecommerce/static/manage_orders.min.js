jQuery((function(a){a("#doaction").on("click",(function(t){return!("mark_as_paid"==a("#bulk-action-selector-top").val()&&!confirm(ngg_order_i18n.mark_as_paid_prompt))||(t.preventDefault(),!1)})),a(".resubmit-lab-order").on("click",(function(t){t.preventDefault();var e=a(this),r={order:e.data("order"),nonce:e.data("nonce"),action:"resubmit_lab_order"};e.text(e.data("alt-label")),a.post(photocrati_ajax.url,r,(function(t){try{if("object"!=typeof t&&(t=JSON.parse(t)),t.success){var r=a('.lab-order-status[data-order="'+e.data("order")+'"]');r.parent(".order_status").removeClass("ngg-lab-order-error").addClass("ngg-lab-order-success"),r.find(".lab-order-status-label").text(e.data("success-label")),e.remove()}}catch(a){console.log(a)}e.text(e.data("label"))})),console.log(r)})),a(".lab-order-status").each((function(){var t=a(this),e=t.parent(".order_status"),r=t.data("order"),o=t.data("error-label"),s=t.data("error-msg"),n=t.data("cancel-label"),l=t.data("success-label"),d=t.data("not-done-label"),c=t.data("confirm-payment-label"),i=JSON.stringify({order:r});a.ajax("https://850t23mohg.execute-api.us-east-1.amazonaws.com/latest/",{accepts:"application/json",contentType:"application/json",data:i,dataType:"json",method:"POST",error:function(a,t,r){e.addClass("ngg-lab-order-error").find(".lab-order-status-label").text(o).attr("title",s)},success:function(t,r,o){"object"!=typeof t&&(t=JSON.parse(t));var s=Date.now()/1e3-Date.parse(t.startDate)/1e3<30;if("Submitted"==t.statusCode||s){const a=s?"0.00":t.costOfGoods,r=s?d:l;e.attr("title","").removeClass("ngg-lab-order-error").find(".lab-order-status-label").text(r),e.parent().find(".ngg-lab-order-cost-amount").text(a)}else e.attr("title",t.message).addClass("ngg-lab-order-error").find(".lab-order-status-label").text(n),"Requires3DS"==t.statusCode&&($confirm_payment_link=a("<a/>").attr("target","_blank").attr("href",t.confirmPaymentUrl).text(c),e.removeClass("ngg-lab-order-error").addClass("ngg-lab-order-awaiting-confirmation").find(".lab-order-status-label").empty().append($confirm_payment_link))}})}))}));