!function(t){var e=!1;if(-1!==navigator.appName.indexOf("Internet Explorer")){if(-1!==navigator.appVersion.indexOf("MSIE 8"))return;-1!==navigator.appVersion.indexOf("MSIE 1")&&(e=10)}var n=function(e){if(void 0===window.galleries)return null;var n=null;return t.each(window.galleries,(function(t,a){if("object"!=typeof a)return!1;a.ID===e&&(n=a)})),n},a=function(t,e,n){var a=n;return 1==(a=void 0!==t.display_settings[e]&&""!=t.display_settings[e]?t.display_settings[e]:n)&&(a=!0),0==a&&(a=!1),"1"==a&&(a=!0),"0"==a&&(a=!1),"false"==a&&(a=!1),"true"==a&&(a=!0),a},i=["EM","STRONG","B","DEL","I","INS","MARK","SMALL","STRIKE","SUB","SUP","TT","U"],r=function(t){var e=document.createElement("div");return e.innerHTML=t,s(e),e.innerHTML},s=function(t){for(var e=Array.prototype.slice.apply(t.getElementsByTagName("*"),[0]),n=0;n<e.length;n++)-1==i.indexOf(e[n].nodeName)&&o(e[n])},o=function(t){for(var e=t,n=t.childNodes.length-1;n>=0;n--){var a=t.removeChild(t.childNodes[n]);t.parentNode.insertBefore(a,e),e=a}t.parentNode.removeChild(t)};nggc_share_icons={strip_html:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},create:function(e,n){var a=n.data("image-id"),i=n.data("nplmodal-gallery-id"),r=(encodeURIComponent(this.get_share_url(i,a)),encodeURIComponent(window.location.toString())),s=(this.strip_html(n.data("title")),this.strip_html(n.data("description"))),o=t("<i/>",{"data-href":"https://twitter.com/share?url="+this.get_share_url(i,a,"full"),class:"ngg-caption-icon fa fa-twitter-square"}),c="https://www.facebook.com/share.php";c+="?u="+encodeURIComponent(this.get_share_url(i,a,"full"));var g=t("<i/>",{"data-href":c,class:"ngg-caption-icon fa fa-facebook-square"}),d=encodeURIComponent(this.get_share_url(i,a,"full"));d+="&url="+r,d+="&media="+n.attr("href");var l=[o,g,t("<i/>",{"data-href":"http://pinterest.com/pin/create/button/?s=100"+(d+="&description="+s),class:"ngg-caption-icon fa fa-pinterest-square"})];t(l).each((function(){t(this).on("click",(function(e){return e.preventDefault(),window.open(t(this).data("href"),"_blank").trigger("focus"),!1}))})),e.html("").append(l)},get_share_url:function(e,n,a){void 0===a&&(a="thumb");var i=t.nplModal("get_setting","share_url").replace("{gallery_id}",e).replace("{image_id}",n).replace("{named_size}",a),r=t("<a/>").attr("href",t.nplModal("get_setting","wp_site_url"))[0],s=t("<a/>").attr("href",window.location.toString())[0],o=t("<a/>").attr("href",i)[0];return s.pathname.indexOf(r.pathname)>=0&&(s.pathname=s.pathname.substr(r.pathname.length)),s.pathname.indexOf(o.pathname)>=0&&(s.pathname=s.pathname.substr(s.pathname.length)),o.search=s.search,o.search.length>0&&(o.search+="&"),o.search+="uri="+s.pathname,o.href}},t.fn.nggcaption=function(){this.each((function(){var i=t(this),s=n(i.data("ngg-captions-id")),o=a(s,"captions_animation","slideup"),g=i.find("img").first();if(!g.attr("src")&&!g.attr("srcset"))return!0;var d=t('<figure class="ngg-figure"></figure>'),l=t('<figcaption class="ngg-figcaption"></figcaption>');if(a(s,"captions_display_title",!0)){var p=t("<h6>"+r(i.data("title"))+"</h6>");a(s,"captions_display_title",!0)||d.addClass("nggc_no_title")}var h=t('<div class="nggc-body"/>'),f=t("<p>"+r(i.data("description"))+"</p>");h.append(f),a(s,"captions_display_description",!0)||d.addClass("nggc_no_description");var u=i.attr("class"),m=i.attr("style"),_=g.attr("style");if(i.removeAttr("title"),i.data("ngg-captions-nostylecopy")||(i.removeAttr("class"),i.removeAttr("style")),this.classList.add("ngg-captions-processed"),d.addClass("ngg-figure-"+o),l.addClass("ngg-figcaption-"+o),-1==t.inArray(s.source,["albums","random","random_images"])&&void 0!==window.nplModalSettings&&"1"==nplModalSettings.enable_routing&&"1"==nplModalSettings.enable_sharing&&a(s,"captions_display_sharing",!0)){var v=s.slug;if(!v||-1==v.indexOf("widget-ngg-images")){var w=t('<div class="nggc-icon-wrapper"/>');nggc_share_icons.create(w,i),t(document).trigger("ngg-caption-add-icons",{el:w,image_id:i.data("image-id"),gallery_id:i.data("nplmodal-gallery-id")}),l.append(w)}}else d.addClass("nggc_no_sharing");a(s,"captions_display_title",!0)&&l.append(p),a(s,"captions_display_description",!0)&&l.append(h),e&&10===e&&t(d).addClass("nggc-ie10"),i.data("ngg-captions-nostylecopy")||(d.attr("style",_),d.attr("style",m)),g.removeAttr("style"),i.data("ngg-captions-nostylecopy")||d.css({"max-width":parseInt(g[0].getAttribute("width"))+"px"}),$newfigure=g.wrap(d),g.after(l),i.data("ngg-captions-nostylecopy")||$newfigure.addClass(u),$newfigure.imagesLoaded().done((function(){c(l)})),$newfigure.parent("p").before($newfigure)})),t(document).trigger("ngg-captions-added")};const c=function(e){void 0===e&&(e=t("figcaption.ngg-figcaption")),t("div.nextgen_pro_thumbnail_grid a").each((function(){var e=t(this),n=e.find("img");n.hasClass("thickbox")&&(n.removeClass("thickbox"),e.addClass("thickbox"))})),e.each((function(){const e=t(this),i=n(e.parents("a").first().data("ngg-captions-id")),r=a(i,"captions_animation","slideup"),s=e.find("h6"),o=0!==s.length?s.outerHeight():0,c=e.outerHeight(),g=e.find(".nggc-icon-wrapper"),d=0!==g.length?g.height():0,l=e.find(".nggc-body"),p=e.find(".nggc-body p");"titlebar"===r?0!==p.length&&shave(p[0],l.height()):(0!==s.length&&shave(s[0],c-d),0!==p.length&&shave(p[0],c-d-o-20))}))},g=_.debounce(c,500,!0);window.ngg_captions_adjust=g;const d=function(e){e=e||!1,t('a[data-ngg-captions-enabled]:not(".ngg-captions-processed")').each((function(){this.classList.add("ngg-captions-processed");const n=t(this);e?t(window).on("load",(function(){n.nggcaption()})):n.nggcaption()}))};d(!0),t(window).on("refreshed",(function(){d(),g()})),t(window).on("resize fullscreenchange mozfullscreenchange webkitfullscreenchange orientationchange",(function(){g()}))}(jQuery);